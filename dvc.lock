schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocess/preprocess_data.py
    deps:
    - path: data/raw/test.tsv
      md5: f06925444bd9e4b12b382e0e267345a7
      size: 1061380
    - path: data/raw/train.tsv
      md5: 2502592a16c44c1e33cb827b2a647406
      size: 7296139
    - path: data/raw/validation.tsv
      md5: 508e1de849c33ba2f38f0b118590a4cd
      size: 2196271
    - path: src/preprocess/preprocess_data.py
      md5: e79bf931b4eb841df9e79c127ef2067e
      size: 4045
    params:
      params.yaml:
        preprocess:
          script: src/preprocess/preprocess_data.py
          input_train: data/raw/train.tsv
          input_val: data/raw/validation.tsv
          input_test: data/raw/test.tsv
          output_train: data/processed/train_preprocessed.pkl
          output_val: data/processed/validation_preprocessed.pkl
          output_test: data/processed/test_preprocessed.pkl
    outs:
    - path: data/processed/test_preprocessed.pkl
      md5: 560374031d4a9715559a6f248d37c25a
      size: 864828
    - path: data/processed/train_preprocessed.pkl
      md5: 2d8f0094af314e5bec9253fd319904a1
      size: 6387103
    - path: data/processed/validation_preprocessed.pkl
      md5: c6cbd9bc38a543e6f33b3885e2561774
      size: 1922854
  featurize:
    cmd: python src/features/build_features.py
    deps:
    - path: data/processed/test_preprocessed.pkl
      md5: 560374031d4a9715559a6f248d37c25a
      size: 864828
    - path: data/processed/train_preprocessed.pkl
      md5: 2d8f0094af314e5bec9253fd319904a1
      size: 6387103
    - path: data/processed/validation_preprocessed.pkl
      md5: c6cbd9bc38a543e6f33b3885e2561774
      size: 1922854
    - path: src/features/build_features.py
      md5: d1edc144ebf60feb4bb561345c9a3510
      size: 8498
    params:
      params.yaml:
        featurize:
          script: src/features/build_features.py
          output_train: data/interim/train_featurized.pkl
          output_val: data/interim/validation_featurized.pkl
          output_test: data/interim/test_featurized.pkl
          mlb_out: models/mlb.pkl
        preprocess:
          script: src/preprocess/preprocess_data.py
          input_train: data/raw/train.tsv
          input_val: data/raw/validation.tsv
          input_test: data/raw/test.tsv
          output_train: data/processed/train_preprocessed.pkl
          output_val: data/processed/validation_preprocessed.pkl
          output_test: data/processed/test_preprocessed.pkl
    outs:
    - path: data/interim/test_featurized.pkl
      md5: b0a79cca2675fe19fec0a1764102c1d9
      size: 1652795
    - path: data/interim/train_featurized.pkl
      md5: 884930a11acdff791999c415fcfb2349
      size: 48485366
    - path: data/interim/validation_featurized.pkl
      md5: bc0d877f6a51fb4cdecfc190ab6f0acc
      size: 14487048
    - path: models/mlb.pkl
      md5: 24fa46aeefc134dab1c55eb64a7219de
      size: 1880
  train:
    cmd: python src/models/train_model.py
    deps:
    - path: data/interim/train_featurized.pkl
      md5: 884930a11acdff791999c415fcfb2349
      size: 48485366
    - path: src/models/train_model.py
      md5: 44798932f227f5b5d9355ecf5a287c81
      size: 3297
    params:
      params.yaml:
        featurize:
          script: src/features/build_features.py
          output_train: data/interim/train_featurized.pkl
          output_val: data/interim/validation_featurized.pkl
          output_test: data/interim/test_featurized.pkl
          mlb_out: models/mlb.pkl
        train:
          script: src/models/train_model.py
          model_out: models/model.pkl
    outs:
    - path: models/model.pkl
      md5: 3d1465b18851786bf7badc5ea7d7ebbf
      size: 14663131
  evaluate:
    cmd: python src/models/evaluate_model.py
    deps:
    - path: data/interim/validation_featurized.pkl
      md5: bc0d877f6a51fb4cdecfc190ab6f0acc
      size: 14487048
    - path: models/model.pkl
      md5: 3d1465b18851786bf7badc5ea7d7ebbf
      size: 14663131
    - path: src/models/evaluate_model.py
      md5: 590f4e879f5600b8a9051e0a3cd797bf
      size: 8385
    params:
      params.yaml:
        evaluate:
          script: src/models/evaluate_model.py
          scores_path: reports/scores.json
          roc_json: reports/roc_plot.json
          prc_json: reports/prc_plot.json
        featurize:
          script: src/features/build_features.py
          output_train: data/interim/train_featurized.pkl
          output_val: data/interim/validation_featurized.pkl
          output_test: data/interim/test_featurized.pkl
          mlb_out: models/mlb.pkl
        train:
          script: src/models/train_model.py
          model_out: models/model.pkl
    outs:
    - path: reports/scores.json
      md5: 363ce90678943641d8a3c0f268002342
      size: 175
